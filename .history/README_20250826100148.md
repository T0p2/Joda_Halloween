# TicketApp - Aplicación de Venta de Entradas de Fiesta

Una aplicación web completa para la venta de entradas de fiesta con pagos seguros, códigos QR únicos y envío automático por email.

## 🚀 Características

- **Frontend Moderno**: React con TypeScript y Tailwind CSS
- **Backend Robusto**: Node.js con Express y SQLite
- **Pagos Seguros**: Integración con Stripe
- **Códigos QR Únicos**: Generación automática para cada entrada
- **Envío de Emails**: Notificaciones automáticas con entradas adjuntas
- **Autenticación**: Sistema de usuarios con JWT
- **Validación de Pagos**: Verificación automática de transacciones
- **Interfaz Responsiva**: Diseño moderno y adaptable a todos los dispositivos

## 🛠️ Tecnologías Utilizadas

### Backend

- **Node.js** - Runtime de JavaScript
- **Express** - Framework web
- **SQLite** - Base de datos
- **Stripe** - Pasarela de pagos
- **Nodemailer** - Envío de emails
- **QRCode** - Generación de códigos QR
- **JWT** - Autenticación
- **bcryptjs** - Encriptación
- **express-validator** - Validación de datos

### Frontend

- **React** - Biblioteca de UI
- **TypeScript** - Tipado estático
- **Tailwind CSS** - Framework de CSS
- **React Router** - Navegación
- **Axios** - Cliente HTTP
- **React Hot Toast** - Notificaciones
- **Lucide React** - Iconos
- **Stripe Elements** - Componentes de pago

## 📋 Requisitos Previos

- Node.js (versión 16 o superior)
- npm o yarn
- Cuenta de Stripe (para pagos)
- Cuenta de Gmail (para envío de emails)

## 🔧 Instalación

### 1. Clonar el Repositorio

```bash
git clone <url-del-repositorio>
cd ticketing-app
```

### 2. Instalar Dependencias

```bash
# Instalar todas las dependencias (backend y frontend)
npm run install-all

# O instalar por separado:
npm install
cd server && npm install
cd ../client && npm install
```

### 3. Configurar Variables de Entornonpm re

#### Backend (.env)

Copia el archivo `server/env.example` a `server/.env` y configura las variables:

```bash
# Server Configuration
PORT=5000
NODE_ENV=development

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Email Configuration (Gmail)
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password_here

# JWT Secret
JWT_SECRET=your_jwt_secret_key_here

# Database
DATABASE_PATH=./database.sqlite
```

#### Frontend (.env)

Crea un archivo `.env` en la carpeta `client`:

```bash
REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
```

### 4. Configurar Stripe

1. Crea una cuenta en [Stripe](https://stripe.com)
2. Obtén tus claves de API desde el dashboard
3. Configura webhooks (opcional para producción)

### 5. Configurar Email (Gmail)

1. Habilita la verificación en dos pasos en tu cuenta de Gmail
2. Genera una contraseña de aplicación
3. Usa esa contraseña en la variable `EMAIL_PASS`

## 🚀 Ejecutar la Aplicación

### Desarrollo

```bash
# Ejecutar backend y frontend simultáneamente
npm run dev

# O ejecutar por separado:
npm run server  # Backend en puerto 5000
npm run client  # Frontend en puerto 3000
```

### Producción

```bash
# Construir el frontend
npm run build

# Ejecutar solo el backend
npm run server
```

## 📱 Uso de la Aplicación

### 1. Registro/Login

- Los usuarios pueden registrarse con email, nombre y teléfono
- El sistema utiliza autenticación por email (simplificado para demo)

### 2. Explorar Eventos

- Ver todos los eventos disponibles
- Buscar eventos por nombre o ubicación
- Ver detalles, precios y disponibilidad

### 3. Comprar Entradas

- Seleccionar cantidad de entradas
- Completar el proceso de pago con Stripe
- Recibir confirmación inmediata

### 4. Gestionar Entradas

- Ver todas las entradas compradas
- Generar códigos QR únicos
- Enviar entradas por email
- Descargar códigos QR

### 5. Validación de Entradas

- Los organizadores pueden validar entradas escaneando códigos QR
- Sistema de estado de entradas (activa, usada, cancelada)

## 🔐 Seguridad

- **Pagos**: Stripe maneja toda la información de tarjetas de crédito
- **Autenticación**: JWT tokens con expiración
- **Validación**: Verificación de datos en frontend y backend
- **Base de datos**: SQLite con consultas preparadas
- **Emails**: Envío seguro con Nodemailer

## 📊 Estructura de la Base de Datos

### Tablas Principales

- **users**: Información de usuarios
- **events**: Eventos disponibles
- **tickets**: Entradas vendidas
- **payments**: Transacciones de pago

## 🧪 Testing

Para probar la aplicación:

1. **Pagos de Prueba**: Usa las tarjetas de prueba de Stripe

   - `4242 4242 4242 4242` (pago exitoso)
   - `4000 0000 0000 0002` (pago rechazado)
2. **Emails**: Configura un email real para recibir las entradas
3. **Códigos QR**: Genera y descarga códigos QR para validación

## 🚀 Despliegue

### Heroku

```bash
# Configurar variables de entorno en Heroku
heroku config:set STRIPE_SECRET_KEY=sk_live_...
heroku config:set EMAIL_USER=your_email@gmail.com
# ... otras variables

# Desplegar
git push heroku main
```

### Vercel (Frontend)

```bash
# Instalar Vercel CLI
npm i -g vercel

# Desplegar
cd client
vercel
```

## 🤝 Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## 📝 Licencia

Este proyecto está bajo la Licencia MIT. Ver el archivo `LICENSE` para más detalles.

## 🆘 Soporte

Si tienes problemas o preguntas:

1. Revisa la documentación
2. Verifica que todas las variables de entorno estén configuradas
3. Asegúrate de que Stripe esté configurado correctamente
4. Revisa los logs del servidor para errores

## 🔄 Actualizaciones Futuras

- [ ] Panel de administración para organizadores
- [ ] Múltiples métodos de pago
- [ ] Sistema de reembolsos
- [ ] Notificaciones push
- [ ] App móvil nativa
- [ ] Integración con redes sociales
- [ ] Sistema de descuentos y códigos promocionales

---

**¡Disfruta usando TicketApp! 🎉**
